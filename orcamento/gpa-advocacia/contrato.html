<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Contrato de Prestação de Serviços — Projeto GPA Advocacia</title>

  <link
    href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Inter:wght@300;400;600&display=swap"
    rel="stylesheet">

  <style>
    :root {
      --bg: #f7f9fc;
      --card: #ffffff;
      --ink: #17223b;
      --muted: #5f6b86;
      --line: #e2e8f0;
      --brand: #0ea5e9;
      --brand-2: #ff7a59;
      --ok: #16a34a;
      --radius: 18px;
    }

    * {
      box-sizing: border-box
    }

    body {
      margin: 0;
      background: var(--bg);
      color: var(--ink);
      font-family: 'Inter', system-ui, Segoe UI, Roboto, Arial, sans-serif;
    }

    .wrap {
      max-width: 980px;
      margin: 0 auto;
      padding: 28px;
    }

    /* HEADER */
    header.hero {
      position: relative;
      border-radius: 28px;
      overflow: hidden;
      background: linear-gradient(135deg, #ffffff, #f4fbff);
      border: 1px solid var(--line);
      box-shadow: 0 12px 40px rgba(17, 24, 39, .06);
    }

    .hero-art {
      position: absolute;
      inset: -1px;
      pointer-events: none;
      background:
        radial-gradient(60% 55% at 90% 10%, rgba(14, 165, 233, .15), transparent 65%),
        radial-gradient(60% 55% at 10% 0%, rgba(255, 122, 89, .12), transparent 60%);
      filter: saturate(1.05);
    }

    .partnerbar {
      position: relative;
      z-index: 1;
      display: flex;
      gap: 16px;
      align-items: center;
      justify-content: center;
      padding: 14px;
      border-bottom: 1px solid var(--line);
      background: linear-gradient(180deg, #ffffffaa, #ffffffee);
    }

    .partnerbar img {
      height: 34px
    }

    .partnerbar .sep {
      width: 1px;
      height: 22px;
      background: var(--line);
    }

    .brand {
      position: relative;
      z-index: 1;
      display: grid;
      grid-template-columns: 120px 1fr;
      gap: 18px;
      align-items: center;
      padding: 20px;
    }

    @media (max-width:740px) {
      .brand {
        grid-template-columns: 1fr;
        text-align: center;
        justify-items: center;
      }
    }

    .brand img#logo-gpa {
      width: 110px;
      height: auto;
      border-radius: 14px;
      box-shadow: 0 10px 24px rgba(14, 165, 233, .18);
    }

    .brand h1 {
      margin: 0;
      font: 700 24px/1.25 'Poppins', sans-serif;
    }

    .brand p {
      margin: 6px 0 0;
      color: var(--muted);
    }

    .badges {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      margin-top: 10px;
    }

    .badge {
      font: 600 11px/1 'Inter', sans-serif;
      padding: 7px 10px;
      border-radius: 999px;
      border: 1px solid var(--line);
      background: #fff;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .badge span.icon {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: var(--brand);
    }

    /* SECTIONS */
    .section {
      margin-top: 22px;
    }

    .card {
      background: var(--card);
      border: 1px solid var(--line);
      border-radius: var(--radius);
      padding: 18px 20px;
      box-shadow: 0 8px 28px rgba(17, 24, 39, .05);
    }

    h2 {
      font: 700 18px/1.2 'Poppins', sans-serif;
      margin: 0 0 10px;
    }

    h3 {
      font: 600 15px/1.2 'Poppins', sans-serif;
      margin: 12px 0 6px;
    }

    p {
      margin: 6px 0;
      font-size: 14px;
      line-height: 1.5;
    }

    .muted {
      color: var(--muted);
    }

    .grid-2 {
      display: grid;
      gap: 16px;
      grid-template-columns: 1fr 1fr;
    }

    @media (max-width:820px) {
      .grid-2 {
        grid-template-columns: 1fr;
      }
    }

    ul {
      margin: 6px 0 6px 18px;
      padding: 0;
      font-size: 14px;
    }

    li {
      margin: 4px 0;
    }

    .label {
      font-weight: 600;
    }

    .highlight {
      background: #ecfeff;
      border-radius: 10px;
      padding: 10px 12px;
      font-size: 13px;
    }

    /* PAYMENT BOX */
    .price-main {
      font: 700 20px/1.2 'Poppins', sans-serif;
      margin-bottom: 4px;
      color: var(--ink);
    }

    .price-detail {
      font-size: 13px;
      color: var(--muted);
    }

    /* TIMELINE */
    .timeline {
      position: relative;
      padding-left: 18px;
      margin-top: 4px;
    }

    .timeline:before {
      content: "";
      position: absolute;
      left: 6px;
      top: 4px;
      bottom: 4px;
      width: 2px;
      background: var(--line);
    }

    .titem {
      position: relative;
      padding-left: 10px;
      margin: 8px 0;
      font-size: 13px;
    }

    .titem:before {
      content: "";
      position: absolute;
      left: -1px;
      top: 6px;
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: var(--brand);
    }

    /* SIGNATURES */
    .sign-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 18px;
    }

    @media (max-width:820px) {
      .sign-grid {
        grid-template-columns: 1fr;
      }
    }

    .sig-box {
      border: 2px dashed var(--line);
      border-radius: 14px;
      background: #f8fafc;
      padding: 10px;
    }

    .sig-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
      margin-bottom: 6px;
    }

    .sig-header span {
      font-size: 13px;
      font-weight: 600;
    }

    .sig-actions {
      display: flex;
      gap: 6px;
      flex-wrap: wrap;
    }

    .sig-actions label,
    .sig-actions button {
      border-radius: 999px;
      border: 1px solid var(--line);
      background: #fff;
      font-size: 11px;
      padding: 4px 8px;
      cursor: pointer;
    }

    .sig-actions input[type="file"] {
      display: none;
    }

    .signature {
      width: 100%;
      height: 130px;
      border-radius: 10px;
      background: #ffffff;
      box-shadow: inset 0 0 0 1px #e5e7eb;
    }

    .sig-name {
      margin-top: 6px;
      font-size: 12px;
      font-weight: 600;
      text-align: center;
    }

    .controls {
      margin-top: 10px;
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: flex-end;
    }

    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      padding: 10px 14px;
      border-radius: 999px;
      border: none;
      cursor: pointer;
      font-size: 13px;
      font-weight: 600;
      text-decoration: none;
    }

    .btn-primary {
      background: linear-gradient(135deg, #0ea5e9, #0369a1);
      color: #fff;
      box-shadow: 0 8px 20px rgba(14, 165, 233, .35);
    }

    .btn-ghost {
      background: #fff;
      color: #0f172a;
      border: 1px solid var(--line);
    }

    /* ANEXO */
    .anexo-thumb {
      width: 100%;
      max-width: 420px;
      border-radius: 14px;
      border: 1px solid var(--line);
      background: #fff;
      cursor: pointer;
      transition: transform .18s ease, box-shadow .18s ease;
      box-shadow: 0 6px 18px rgba(15, 23, 42, .08);
    }

    .anexo-thumb:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 26px rgba(15, 23, 42, .12);
    }

    .anexo-helper {
      font-size: 12px;
      color: var(--muted);
      margin-top: 6px;
    }

    .anexo-viewer {
      margin-top: 14px;
      border-radius: 14px;
      border: 1px solid var(--line);
      background: #fff;
      overflow: hidden;
      max-height: 0;
      opacity: 0;
      transition: max-height .35s ease, opacity .3s ease;
    }

    .anexo-viewer.open {
      max-height: 85vh;
      opacity: 1;
    }

    .anexo-scroll {
      position: relative;
      max-height: 80vh;
      overflow: hidden;
      background: #0f172a;
    }

    .anexo-close {
      text-align: right;
      padding: 8px;
      background: #fff;
      border-bottom: 1px solid var(--line);
    }

    .anexo-close button {
      padding: 6px 12px;
      border-radius: 8px;
      border: 1px solid var(--line);
      background: #f1f5f9;
      font-size: 12px;
      cursor: pointer;
    }

    /* ZOOM + DRAG */
    #zoomContainer {
      width: 100%;
      height: 600px;
      overflow: visible;
      position: relative;
      cursor: grab;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #zoomContainer:active {
      cursor: grabbing;
    }

    #zoomImg {
      position: absolute;
      top: 0;
      left: 0;
      transform-origin: top left;
      user-select: none;
      -webkit-user-drag: none;
    }

    .zoom-controls {
      position: absolute;
      bottom: 12px;
      right: 12px;
      display: flex;
      gap: 8px;
      z-index: 10;
    }

    .zoom-controls button {
      width: 36px;
      height: 36px;
      border-radius: 8px;
      border: 1px solid var(--line);
      background: #fff;
      cursor: pointer;
      font-size: 20px;
      font-weight: 700;
      box-shadow: 0 4px 10px rgba(0, 0, 0, .15);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    footer {
      margin: 26px 0 6px;
      text-align: center;
      color: #94a3b8;
      font-size: 11px;
    }

    /* PRINT */
    @media print {
      body {
        background: #ffffff;
      }

      .wrap {
        padding: 0 20px;
      }

      header.hero {
        box-shadow: none;
      }

      .card {
        box-shadow: none;
      }

      .controls,
      .sig-actions,
      .partnerbar,
      .zoom-controls,
      .anexo-helper {
        display: none !important;
      }

      .anexo-thumb {
        display: block;
        width: 100%;
        max-width: 100%;
      }

      .anexo-viewer {
        display: none;
      }
    }
  </style>
</head>

<body>
  <div class="wrap">

    <header class="hero">
      <div class="hero-art"></div>
      <div class="partnerbar">
        <img src="https://e-web.online/assets/img/app-landing/logo/logo1.png" alt="e-Web Agency">
        <div class="sep"></div>
        <span style="font-weight:600;color:#334155;font-size:13px;text-align:center;">Contrato e-Web Agency +
          Empresarial Web</span>
        <div class="sep"></div>
        <img src="https://empresarialweb.com.br/images/logo-empresarialweb.png" alt="Empresarial Web">
      </div>
      <div class="brand">
        <img id="logo-gpa" alt="Logo GPA Advocacia" src="logo-gpa-escura.png" onerror="this.style.display='none'">
        <div>
          <h1>Contrato de Prestação de Serviços Digitais</h1>
          <p>Desenvolvimento de Site Institucional + Arquitetura SEO — Projeto GPA Advocacia.</p>
          <div class="badges">
            <span class="badge"><span class="icon"></span>Contrato Comercial</span>
            <span class="badge"><span class="icon" style="background:var(--brand-2);"></span>Site Exclusivo</span>
            <span class="badge"><span class="icon" style="background:var(--ok);"></span>R$ 2.200 (Parcelado)</span>
          </div>
        </div>
      </div>
    </header>

    <section class="section card">
      <h2>Partes</h2>

      <h3>CONTRATANTE</h3>
      <p><span class="label">Nome empresarial:</span> Gustavo de Oliveira Pedroso Sociedade Individual de Advocacia</p>
      <p><span class="label">CNPJ:</span> 52.964.752/0001-76 &nbsp;|&nbsp; Nome fantasia: “Gustavo ADV”</p>
      <p><span class="label">Endereço:</span> Rua Maria de Lurdes dos Santos, 405 – Casa 01 – Atuba – Colombo/PR</p>
      <p><span class="label">E-mail:</span> pedrosogustavo2@outlook.com &nbsp;|&nbsp; <span
          class="label">Telefone:</span> (41) 9742-3394</p>

      <h3>CONTRATADO</h3>
      <p><span class="label">Nome:</span> Felipe Nunes Chagas</p>
      <p><span class="label">CPF:</span> 070.292.459-89</p>
      <p><span class="label">Agência:</span> e-Web Agency + Empresarial Web</p>
      <p><span class="label">E-mail:</span> felipe@empresarialweb.com.br &nbsp;|&nbsp; <span
          class="label">WhatsApp:</span> (41) 99975-0085</p>
    </section>

    <section class="section card">
      <h2>Cláusula 1 — Objeto do Contrato</h2>
      <p>O presente contrato tem por objeto o <strong>desenvolvimento completo do site institucional da GPA
          Advocacia</strong>, tomando como base inicial a estrutura visualizada no <strong>Anexo I (Mapa do
          Site)</strong>, que será validada e ajustada em conjunto durante o desenvolvimento.</p>

      <h3>1.1 — Entregáveis Técnicos e de Conteúdo</h3>

      <p class="label">Estrutura e Design Exclusivo:</p>
      <ul>
        <li>Desenvolvimento de site moderno, responsivo e rápido.</li>
        <li><strong>Layout da Home:</strong> Design 100% exclusivo e personalizado para a página principal.</li>
        <li><strong>Páginas Internas:</strong> Layout interno personalizado seguindo a identidade visual da marca
          (Design System), garantindo unidade estética exclusiva para o escritório em todas as páginas de conteúdo.</li>
      </ul>

      <p class="label">Conteúdo (Redação):</p>
      <ul>
        <li>Redação, curadoria e inserção de conteúdo textual e visual das páginas do Anexo I.</li>
        <li>Aplicação de técnicas de SEO e Copywriting voltadas ao público-alvo.</li>
      </ul>

      <p class="label">SEO Técnico e Regional:</p>
      <ul>
        <li>Configuração de metatags, titles, descriptions e sitemaps.</li>
        <li>Configuração técnica focada na atuação local (Curitiba/RMC), com estrutura preparada para suportar futura
          expansão gradual (PR/SC/SP).</li>
      </ul>
    </section>

    <section class="section card">
      <h2>Cláusula 2 — Investimento e Forma de Pagamento</h2>
      <p>O valor total ajustado para o projeto é de <strong>R$ 2.200,00 (dois mil e duzentos reais)</strong>, a ser pago
        da seguinte forma:</p>

      <div class="grid-2">
        <div>
          <h3>2.1 — Entrada (Início do Projeto)</h3>
          <p class="highlight">
            <strong>R$ 700,00 (setecentos reais)</strong>, pagos na assinatura deste contrato via PIX, cobrindo custos
            iniciais de setup (certificações, APIs e ferramentas).
          </p>

          <h3>2.2 — Parcelamento do Saldo</h3>
          <p>O saldo restante de <strong>R$ 1.500,00</strong> será parcelado em <strong>10 (dez) parcelas de R$
              150,00</strong>, a serem pagas mensalmente via PIX.</p>
          <p><span class="label">Vencimento:</span> a 1ª parcela vence 30 dias após a data da assinatura e pagamento da
            entrada.</p>
          <p><span class="label">Chave PIX:</span> 07029245989 (CPF) ou confirmar com CONTRATADO.</p>
        </div>

        <div>
          <h3>2.3 — Condições Gerais</h3>
          <ul>
            <li>O parcelamento é um acordo comercial facilitado e <strong>não está vinculado ao andamento do
                projeto</strong>.</li>
            <li>O CONTRATANTE poderá, a seu critério, antecipar parcelas futuras para quitação mais rápida.</li>
          </ul>

          <div class="price-main" style="margin-top:20px;">Resumo Financeiro</div>
          <div class="price-detail">
            Total: R$ 2.200,00<br>
            Entrada: R$ 700,00<br>
            10x R$ 150,00 (PIX)
          </div>
        </div>
      </div>
    </section>

    <section class="section card">
      <h2>Cláusula 3 — Prazos e Entregas</h2>
      <p>Após a confirmação do pagamento da entrada, o projeto seguirá o fluxo abaixo:</p>

      <div class="timeline">
        <div class="titem"><strong>Layout (Home):</strong> apresentação da proposta visual até a sexta-feira subsequente
          ao fechamento.</div>
        <div class="titem"><strong>Validação e Desenvolvimento:</strong> alinhamento sobre o Mapa do Site (Anexo I) e
          início da criação das páginas e conteúdos.</div>
        <div class="titem"><strong>Entrega Final:</strong> site publicado e pronto para revisão final em prazo estimado
          de 40 dias (podendo variar conforme validações e ajustes).</div>
      </div>

      <p style="font-size:13px; margin-top:12px; font-style:italic; color:var(--muted);">
        * Caso os textos não sejam validados pelo CONTRATANTE no prazo, a entrega técnica será considerada realizada
        para fins de conclusão de etapa.
      </p>
    </section>

    <section class="section card">
      <h2>Cláusula 4 — Responsabilidades e Validação</h2>

      <h3>4.1 — Do CONTRATADO</h3>
      <ul>
        <li>Entregar o site funcional, com todos os textos redigidos e otimizados dentro do escopo.</li>
        <li><strong>Revisões e Tratativas:</strong> Realizar reuniões de alinhamento e aplicar as revisões solicitadas
          pelo CONTRATANTE durante o processo, visando desenvolver o serviço da melhor maneira possível e com a melhor
          aderência à identidade do escritório.</li>
        <li>Garantir boa estabilidade técnica, segurança básica e velocidade adequada.</li>
      </ul>

      <h3>4.2 — Do CONTRATANTE (Obrigatório)</h3>
      <ul>
        <li>Fornecer logos, informações institucionais e participar das validações.</li>
        <li>Custear e manter o registro de domínio e a hospedagem do site.</li>
      </ul>

      <h3>4.3 — Isenção de Responsabilidade Jurídica</h3>
      <p class="highlight" style="background:#fff4f0; color:#9a3412;">
        Considerando que os textos serão redigidos pelo CONTRATADO (profissional da área de tecnologia/marketing e não
        jurídica),
        o CONTRATANTE declara estar ciente de que é de sua <strong>inteira responsabilidade revisar e validar a precisão
          legal</strong>,
        termos técnicos e orientações jurídicas presentes no site antes ou logo após a publicação.
        O CONTRATADO fica isento de responsabilidade por eventuais imprecisões jurídicas.
      </p>
    </section>

    <section class="section grid-2">
      <div class="card">
        <h2>Cláusula 5 — Garantia e Suporte</h2>
        <ul>
          <li>O CONTRATADO oferece <strong>30 dias de suporte técnico</strong> após a entrega final.</li>
          <li>Inclui correções de erros, ajustes de layout e alterações nos textos solicitadas durante a fase de revisão
            final.</li>
        </ul>
      </div>

      <div class="card">
        <h2>Cláusula 6 — Plano Mensal (Opcional)</h2>
        <p>O CONTRATANTE poderá aderir posteriormente ao plano de recorrência:</p>
        <p class="highlight"><strong>SEO Contínuo e Expansão — R$ 550,00/mês</strong> (sem fidelidade).</p>
        <ul>
          <li>Monitoramento e melhorias de posicionamento.</li>
          <li>Produção de conteúdos estratégicos.</li>
          <li>Implementação gradual da expansão regional (novas páginas para cidades de PR/SC/SP).</li>
        </ul>
      </div>
    </section>

    <section class="section card">
      <h2>Cláusula 7 — Foro</h2>
      <p>As partes elegem o foro da <strong>Comarca de Curitiba/PR</strong> para dirimir quaisquer dúvidas originadas
        deste contrato.</p>
      <p style="margin-top:12px;">Curitiba, 21 de novembro de 2025.</p>
    </section>

    <section class="section card">
      <h2>Assinaturas</h2>
      <div class="sign-grid">
        <div>
          <div class="sig-box">
            <div class="sig-header">
              <span>Assinatura do CONTRATANTE</span>
              <div class="sig-actions">
                <label>Upload<input type="file" accept="image/*"
                    onchange="loadSignature(event,'sigContratante')"></label>
                <button type="button" onclick="clearSignature('sigContratante')">Limpar</button>
              </div>
            </div>
            <canvas id="sigContratante" class="signature"></canvas>
          </div>
          <p class="sig-name">GUSTAVO DE OLIVEIRA PEDROSO — CONTRATANTE</p>
        </div>

        <div>
          <div class="sig-box">
            <div class="sig-header">
              <span>Assinatura do CONTRATADO</span>
            </div>
            <img src="assinatura.jpg" class="signature" style="object-fit: contain; padding: 10px;">
          </div>
          <p class="sig-name">FELIPE NUNES CHAGAS — CONTRATADO</p>
        </div>
      </div>

      <div class="controls">
        <button type="button" class="btn btn-ghost" onclick="clearAllSignatures()">Limpar assinaturas</button>
        <button type="button" class="btn btn-primary" onclick="window.print()">Imprimir / Salvar em PDF</button>
      </div>
    </section>

    <section class="section card" style="page-break-before: always;">
      <h2>Anexo I — Mapa do Site (Base)</h2>
      <p class="muted">Escopo visual do projeto, sujeito a validação e ajustes durante o desenvolvimento (Clique para
        ampliar).</p>

      <img src="mapa-mental.png" alt="Mapa do site GPA Advocacia" class="anexo-thumb" onclick="toggleAnexoViewer()"
        onerror="this.style.display='none'; this.parentElement.innerHTML+='<p style=\'color:red\'>[Imagem mapa-mental.png não encontrada na pasta]</p>'">

      <div class="anexo-helper">Clique para expandir.</div>

      <div id="anexoViewer" class="anexo-viewer">
        <div class="anexo-close">
          <button onclick="toggleAnexoViewer()">Fechar mapa</button>
        </div>
        <div class="anexo-scroll">
          <div id="zoomContainer">
            <img id="zoomImg" src="mapa-mental.png" alt="Mapa completo">
          </div>
          <div class="zoom-controls">
            <button onclick="zoomIn()">+</button>
            <button onclick="zoomOut()">–</button>
            <button onclick="resetZoom()">Reset</button>
          </div>
        </div>
      </div>
    </section>

    <footer>© 2025 — e-Web Agency + Empresarial Web · Documento confidencial</footer>
  </div>

  <script>
    // --- assinatura com desenho ---
    const signatures = {};

    function initSignatureCanvas(id) {
      const canvas = document.getElementById(id);
      const ctx = canvas.getContext('2d');
      let drawing = false;
      let rect = canvas.getBoundingClientRect();

      function resize() {
        const ratio = window.devicePixelRatio || 1;
        canvas.width = canvas.clientWidth * ratio;
        canvas.height = canvas.clientHeight * ratio;
        ctx.scale(ratio, ratio);
        ctx.lineWidth = 2;
        ctx.lineCap = 'round';
        ctx.strokeStyle = '#111827';
      }

      resize();
      window.addEventListener('resize', () => {
        rect = canvas.getBoundingClientRect();
        resize();
      });

      function getPos(e) {
        if (e.touches && e.touches.length) {
          return {
            x: e.touches[0].clientX - rect.left,
            y: e.touches[0].clientY - rect.top
          };
        }
        return {
          x: e.clientX - rect.left,
          y: e.clientY - rect.top
        };
      }

      function start(e) {
        drawing = true;
        const pos = getPos(e);
        ctx.beginPath();
        ctx.moveTo(pos.x, pos.y);
      }

      function move(e) {
        if (!drawing) return;
        const pos = getPos(e);
        ctx.lineTo(pos.x, pos.y);
        ctx.stroke();
        e.preventDefault();
      }

      function end() {
        drawing = false;
      }

      canvas.addEventListener('mousedown', start);
      canvas.addEventListener('mousemove', move);
      window.addEventListener('mouseup', end);

      canvas.addEventListener('touchstart', start, { passive: false });
      canvas.addEventListener('touchmove', move, { passive: false });
      window.addEventListener('touchend', end);

      signatures[id] = { canvas, ctx };
    }

    function clearSignature(id) {
      const sig = signatures[id];
      if (!sig) return;
      sig.ctx.clearRect(0, 0, sig.canvas.width, sig.canvas.height);
    }

    function clearAllSignatures() {
      Object.keys(signatures).forEach(clearSignature);
    }

    function loadSignature(event, id) {
      const file = event.target.files[0];
      if (!file) return;
      const reader = new FileReader();
      reader.onload = function (e) {
        const img = new Image();
        img.onload = function () {
          const sig = signatures[id];
          if (!sig) return;
          const { canvas, ctx } = sig;
          ctx.clearRect(0, 0, canvas.width, canvas.height);

          const scale = Math.min(canvas.clientWidth / img.width, canvas.clientHeight / img.height);
          const w = img.width * scale;
          const h = img.height * scale;
          const x = (canvas.clientWidth - w) / 2;
          const y = (canvas.clientHeight - h) / 2;
          ctx.drawImage(img, x, y, w, h);
        };
        img.src = e.target.result;
      };
      reader.readAsDataURL(file);
    }

    document.addEventListener('DOMContentLoaded', function () {
      initSignatureCanvas('sigContratante');
      // initSignatureCanvas('sigContratado');
    });

    /* ===== ANEXO VIEWER ===== */
    function toggleAnexoViewer() {
      const viewer = document.getElementById('anexoViewer');
      viewer.classList.toggle('open');
      if (!viewer.classList.contains('open')) {
        resetZoom();
      }
    }

    /* ===== ZOOM & DRAG DO ANEXO ===== */
    let scale = 1;
    let posX = 0;
    let posY = 0;
    let isDragging = false;
    let startX, startY;

    const zoomImg = document.getElementById("zoomImg");
    const zoomContainer = document.getElementById("zoomContainer");

    function updateTransform() {
      zoomImg.style.transform = `translate(${posX}px, ${posY}px) scale(${scale})`;
    }

    function zoomIn() {
      scale += 0.2;
      updateTransform();
    }

    function zoomOut() {
      scale = Math.max(0.2, scale - 0.2);
      updateTransform();
    }

    function resetZoom() {
      scale = 1;
      posX = 0;
      posY = 0;
      updateTransform();
    }

    if (zoomContainer) {
      zoomContainer.addEventListener("wheel", function (e) {
        e.preventDefault();
        const delta = e.deltaY > 0 ? -0.1 : 0.1;
        scale = Math.max(0.2, scale + delta);
        updateTransform();
      });

      zoomContainer.addEventListener("mousedown", function (e) {
        isDragging = true;
        startX = e.clientX - posX;
        startY = e.clientY - posY;
      });

      window.addEventListener("mousemove", function (e) {
        if (!isDragging) return;
        posX = e.clientX - startX;
        posY = e.clientY - startY;
        updateTransform();
      });

      window.addEventListener("mouseup", function () {
        isDragging = false;
      });

      // Touch
      zoomContainer.addEventListener("touchstart", function (e) {
        isDragging = true;
        if (e.touches.length === 1) {
          startX = e.touches[0].clientX - posX;
          startY = e.touches[0].clientY - posY;
        }
      }, { passive: false });

      window.addEventListener("touchmove", function (e) {
        if (!isDragging) return;
        if (e.touches.length === 1) {
          posX = e.touches[0].clientX - startX;
          posY = e.touches[0].clientY - startY;
          updateTransform();
          e.preventDefault();
        }
      }, { passive: false });

      window.addEventListener("touchend", () => {
        isDragging = false;
      });
    }
  </script>

</body>

</html>